//Puxando as funções do WP editadas para atender à demanda do WS.
include_once 'config/api/api.php';

//Função do WP que puxa uma query de busca dos posts.
query_posts('post_type=post&posts_per_page=1');
	if(have_posts()) while(have_posts()) the_post();
	//Pegando os "componentes" do post, caso haja post.
	$post_category = the_category_ws();/*
	$post_title =  the_title_ws();
	$post_perma = the_permalink_ws();
	$post_time = the_time_ws('l, d/m/y');
	$post_excerpt = the_excerpt_ws();
	
	//Testando se há imagem associada ao post
	if (has_post_thumbnail()){
		$post_thumbnail = the_post_thumbnail_ws();
		//$teste_thumbnail_caption = the_post_thumbnail_caption();
	};
	*/
//Encerramento da query no cache da memória.
wp_reset_query();

echo 'Categoria: ' . $post_category;











###################  SERVIDOR (WEB SERVICE) FACADE CLASSE #####################
/** Classe responsável por criar a fachada de interação com o usuário **/
class ClienteFacade {
	
	/** Método responsável por testar retorno **/
	public function testeRetorno(){
		return 'Retorno funcionando!';
	}//fim da função
	
}//fim da classe

//URL do serviço no servidor do portal
$url_portalServer = 'http://fga.unb.br/unbgama/wp-content/themes/unbgama/ws/app/servidor.php';

//Instancia do SOAP
$server = new SoapServer(NULL, array('encoding' => 'ISO-8859-1', 'uri' => 'fga'));

//definindo a classe que irá responder as chamadas remotas
$server->setClass('ClienteFacade');

//Preparação para receber as chamadas remotas
$server->handle();
